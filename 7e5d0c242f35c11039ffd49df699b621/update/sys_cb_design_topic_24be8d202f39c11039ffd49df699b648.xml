<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">60be8d202f39c11039ffd49df699b643</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"6c910b2f901b45b6b60e0683650ec60b","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"6c910b2f901b45b6b60e0683650ec60b"}],"goals":[{"name":"primary","trigger_id":"6c910b2f901b45b6b60e0683650ec60b","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"f7d94c05add34c15998585569766547d","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"789bd09d36214219a4cdfbabe92f790b","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"81c93b5b79d1418f8d0d14a1300afaf6","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"92c06e51252b4a91b453f17ed042561c","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return \"You Selected \"+ vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"c7b7316f0c634d64a0115574a818effb","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"42a61e15528f4ef8844680265bb80a48","fields":["priority","short_description","u_when_needed"],"id":"9f87c0a6e38a45d89fab30ea315dd773","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"11d90ad4c39444099cf6fe22cd6f1003","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"42a61e15528f4ef8844680265bb80a48","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view.\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n\n    var options = []; // add options here...\n    var gr = new GlideRecord(table);\n    gr.addQuery('u_requested_for',vaInputs.user);\n    gr.addQuery('active','true')\n    gr.addQuery('u_request_type',vaInputs.needit_type.getValue());\n    gr.orderBy('u_when_needed');\n    gr.query();\n\n    while(gr.next()){\n        options.push({ 'value': gr.getUniqueValue(),\n         'label': gr.getValue('number') + \"(\" + gr.getDisplayValue('u_when_needed') +\")\" + gr.getValue('short_description') \n        });\n    }\n    return options;\n})(table)\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\n    var options = []; // add options here...\n    var gr = new GlideRecord(table);\n    gr.addQuery('u_requested_for',vaInputs.user);\n    gr.addQuery('active','true')\n    gr.addQuery('u_request_type',vaInputs.needit_type.getValue());\n    gr.orderBy('u_when_needed');\n    gr.query();\n\n    while(gr.next()){\n        options.push({ 'value': gr.getUniqueValue(),\n         'label': gr.getValue('number') + \"(\" + gr.getDisplayValue('u_when_needed') +\")\" + gr.getValue('short_description') \n        });\n    }\n    return options;\n})(table)\n"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"98fc6ef8006444cbb8d74cc07276b833","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"c703b454b6e947ad8d56b691cf002139","name":"Yes"}],"id":"e33b8ba8785f4f69b4a3c73bce70650e","goal_id":"primary"},{"type":"InputPrompt","variable_id":"30d577f653064533b3baa09289992fdd","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"38a4ea324dab46549553ce5bbc3fd260","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"82aa5f2636b44d5ca7b67c7ec2bf3c20","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"694fa469e1f94dee93cc3f7e904d0ce8","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"42a61e15528f4ef8844680265bb80a48","id":"f2edfc8366654f2592b8090453c95efb","name":"Change When needed date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"42a61e15528f4ef8844680265bb80a48","fields":["priority","short_description","u_when_needed"],"id":"8a89652fc0424ea9a9d9e1815ddc2c9d","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"a7cd24694fea4d669cec1b886d404708","name":"What to update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"ec79ffb2b90d47eeb55d4d74402f9fd5","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What to do you want update\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"When Needed Date","expression":{"type":"Applicability","mode":"query","value":"what_to_update=u_when_needed "},"id":"ca5945d64f8c47ec8095c5b292cfc31b","name":"When Needed Date"},{"type":"Branch","label":"Short description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short_description"},"id":"626556038f6e41e6adbd108aff9913ab","name":"Short description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"10c4e25609444181b4ea728231a41906","name":"Nothing"}],"id":"f2a98736c2bb4088845020d1ee5309d0","goal_id":"primary"},{"type":"InputPrompt","variable_id":"2bd3d18e500d430c93bfaa50b47ef302","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Enter your new short description\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"52bd9c18184b424fb071379c242c25ba","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"42a61e15528f4ef8844680265bb80a48","id":"80d0d017fab24c2b97629e805b1faa79","name":"Change Short Desciption","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.search_count+=1;\n})()\n","id":"031768cd260940349df9194efedb6a47","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if (vaVars.search_count &lt;=3)\n        return true;\n    else \n        return false;\n})()\n"},"id":"b5393d2fdd044de785ab5c152c25b63c","name":"less than 3"},{"type":"Branch","label":"More than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if (vaVars.search_count &gt;3)\n        return true;\n    else \n        return false;\n})()\n"},"id":"9769a258ee5d4257b5fd70b4416c9bfb","name":"More than 3"}],"id":"b174b5861f214d208ad75d29eca79f25","goal_id":"primary"},{"type":"InputPrompt","variable_id":"e12a281e73a042bcbca261112adf02b9","message":{"type":"String","mode":"script","value":"(function execute() {\n    if(vaSystem.isLiveAgentAvailable()) { \n       return 'You have reached your NeedIt search limit. I will transfer you to a live agent for assistance.'\n    } \n    else\n       return 'You have reached your NeedIt search limit. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"2841d4b526e54e3aaa5f107d9f50d49b","name":"Limit Reached","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","script":"(function execute() {\n      // Transfer to a live agent\n      vaSystem.connectToAgent()\n})()","id":"6344537782c7434fbc3d9f3a25dae229","name":"Transfer to Agent","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Always","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n      // If Live Chat is available, return true\n      // otherwise, return false\n      if (vaSystem.isLiveAgentAvailable()){\n          return true;\n      } else {\n          return false;\n      }\n  })()"},"id":"5de2ba01af74407bb4d51ed75719fac4","name":"Always"},{"type":"Branch","label":"Always","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n      // If Live Chat is available, return true\n      // otherwise, return false\n      if (vaSystem.isLiveAgentAvailable()){\n          return false;\n      } else {\n          return true;\n      }\n  })()"},"id":"34d40fc892af476887f114df1cd2ea0d","name":"Always"}],"id":"6d18ad6907a6471d96772c9a1e8fa429","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"11d90ad4c39444099cf6fe22cd6f1003","target_node_id":"9f87c0a6e38a45d89fab30ea315dd773","id":"df603bdba3fc4b99a4fb98c2c812fb85"},{"type":"Edge","source_node_id":"f7d94c05add34c15998585569766547d","target_node_id":"81c93b5b79d1418f8d0d14a1300afaf6","id":"3feae2d025d740008e2ddfebe28365d9"},{"type":"Edge","source_node_id":"81c93b5b79d1418f8d0d14a1300afaf6","target_node_id":"c7b7316f0c634d64a0115574a818effb","id":"b814e71a071a4af2b4883da62975186c"},{"type":"Edge","source_node_id":"c7b7316f0c634d64a0115574a818effb","target_node_id":"11d90ad4c39444099cf6fe22cd6f1003","id":"f745987e8f554fef98e54e6c0b8e48d9"},{"type":"Edge","source_node_id":"e33b8ba8785f4f69b4a3c73bce70650e","target_node_id":"789bd09d36214219a4cdfbabe92f790b","branch_id":"98fc6ef8006444cbb8d74cc07276b833","id":"a9a6eedf933c40b49deea60c81bd25bd","name":"98fc6ef8006444cbb8d74cc07276b833"},{"type":"Edge","source_node_id":"38a4ea324dab46549553ce5bbc3fd260","target_node_id":"e33b8ba8785f4f69b4a3c73bce70650e","id":"499cc00cd9b64219b438513dcd59cb62"},{"type":"Edge","source_node_id":"694fa469e1f94dee93cc3f7e904d0ce8","target_node_id":"f2edfc8366654f2592b8090453c95efb","id":"d13e3e9d3c8442c98fe8e44cb0b6fc68"},{"type":"Edge","source_node_id":"f2edfc8366654f2592b8090453c95efb","target_node_id":"8a89652fc0424ea9a9d9e1815ddc2c9d","id":"fd0925d9a5c545df85016a6932ec8b41"},{"type":"Edge","source_node_id":"8a89652fc0424ea9a9d9e1815ddc2c9d","target_node_id":"38a4ea324dab46549553ce5bbc3fd260","id":"1a20c9ff0fa54f9ba9bd771e141d3c07"},{"type":"Edge","source_node_id":"9f87c0a6e38a45d89fab30ea315dd773","target_node_id":"a7cd24694fea4d669cec1b886d404708","id":"a6cd51b71f6d412f9b0fb5e85ef6f182"},{"type":"Edge","source_node_id":"a7cd24694fea4d669cec1b886d404708","target_node_id":"f2a98736c2bb4088845020d1ee5309d0","id":"a02b9d970579443d80a599e5d1c3a803"},{"type":"Edge","source_node_id":"f2a98736c2bb4088845020d1ee5309d0","target_node_id":"694fa469e1f94dee93cc3f7e904d0ce8","branch_id":"ca5945d64f8c47ec8095c5b292cfc31b","id":"a6471a3c9547472281680521f62c41d7","name":"ca5945d64f8c47ec8095c5b292cfc31b"},{"type":"Edge","source_node_id":"f2a98736c2bb4088845020d1ee5309d0","target_node_id":"52bd9c18184b424fb071379c242c25ba","branch_id":"626556038f6e41e6adbd108aff9913ab","id":"0aa8226393284190a3e1cf6445679741","name":"626556038f6e41e6adbd108aff9913ab"},{"type":"Edge","source_node_id":"52bd9c18184b424fb071379c242c25ba","target_node_id":"80d0d017fab24c2b97629e805b1faa79","id":"4169c551800b4eb59ec8a90624e47001"},{"type":"Edge","source_node_id":"80d0d017fab24c2b97629e805b1faa79","target_node_id":"8a89652fc0424ea9a9d9e1815ddc2c9d","id":"fcdec58082c44d26b4ad73963d74527a"},{"type":"Edge","source_node_id":"f2a98736c2bb4088845020d1ee5309d0","target_node_id":"789bd09d36214219a4cdfbabe92f790b","branch_id":"10c4e25609444181b4ea728231a41906","id":"c34ba686715946739655b578b2bb64fa","name":"10c4e25609444181b4ea728231a41906"},{"type":"Edge","source_node_id":"e33b8ba8785f4f69b4a3c73bce70650e","target_node_id":"031768cd260940349df9194efedb6a47","branch_id":"c703b454b6e947ad8d56b691cf002139","id":"b2cdf51aa74e473cb98f02f18fcd9955","name":"c703b454b6e947ad8d56b691cf002139"},{"type":"Edge","source_node_id":"031768cd260940349df9194efedb6a47","target_node_id":"b174b5861f214d208ad75d29eca79f25","id":"8ce03868b85143ea9bc6d4939798e187"},{"type":"Edge","source_node_id":"b174b5861f214d208ad75d29eca79f25","target_node_id":"81c93b5b79d1418f8d0d14a1300afaf6","branch_id":"b5393d2fdd044de785ab5c152c25b63c","id":"c9646465d262401eaa6676dcc767c8da","name":"b5393d2fdd044de785ab5c152c25b63c"},{"type":"Edge","source_node_id":"b174b5861f214d208ad75d29eca79f25","target_node_id":"2841d4b526e54e3aaa5f107d9f50d49b","branch_id":"9769a258ee5d4257b5fd70b4416c9bfb","id":"4133e2bb8d2746c4b8d77ec844b5054e","name":"9769a258ee5d4257b5fd70b4416c9bfb"},{"type":"Edge","source_node_id":"6344537782c7434fbc3d9f3a25dae229","target_node_id":"789bd09d36214219a4cdfbabe92f790b","id":"03a68d8333644e559d672e562580b20f"},{"type":"Edge","source_node_id":"2841d4b526e54e3aaa5f107d9f50d49b","target_node_id":"6d18ad6907a6471d96772c9a1e8fa429","id":"621b80723da1452180a9abfc12fd9c0d"},{"type":"Edge","source_node_id":"6d18ad6907a6471d96772c9a1e8fa429","target_node_id":"6344537782c7434fbc3d9f3a25dae229","branch_id":"5de2ba01af74407bb4d51ed75719fac4","id":"52f4a78e378b4563a509551000882160","name":"5de2ba01af74407bb4d51ed75719fac4"},{"type":"Edge","source_node_id":"6d18ad6907a6471d96772c9a1e8fa429","target_node_id":"789bd09d36214219a4cdfbabe92f790b","branch_id":"34d40fc892af476887f114df1cd2ea0d","id":"6a54d0ac8dff43fb870f69643d3b03eb","name":"34d40fc892af476887f114df1cd2ea0d"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"list":false,"id":"7ac76615fa704a4e8784c83463ef229a","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"list":false,"id":"2d50ed2479f64565971df9143524a46f","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"92c06e51252b4a91b453f17ed042561c","name":"needit_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"42a61e15528f4ef8844680265bb80a48","name":"needit_list","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","id":"30d577f653064533b3baa09289992fdd","name":"search_again","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","mode":"date","id":"82aa5f2636b44d5ca7b67c7ec2bf3c20","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_58872_needit_needit","id":"1328a42a41a548a08bdfbccb9c51c8ea","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Short Description","element":"short_description"},{"name":"Nothing","element":"nothing"},{"name":"When needed Date","element":"u_when_needed "}],"id":"ec79ffb2b90d47eeb55d4d74402f9fd5","name":"what_to_update","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"new_short_description","list":false,"id":"2bd3d18e500d430c93bfaa50b47ef302","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"62747512958c4c2eb0a9d7e13eb6387d","name":"change_short_desciption","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"limit_reached","list":false,"id":"e12a281e73a042bcbca261112adf02b9","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"7e5d0c242f35c11039ffd49df699b621","domain":"global","topic_type":"STANDARD","channels":[],"id":"191f08a42f35c11039ffd49df699b665","name":"_PRVW__e8be8d20c639c110fcad082a8f712941","key_phrases":["Update NeedIt Records"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[{"name":null,"visible":false,"sysId":"319dc0e42f35c11039ffd49df699b673"}],"triggerable_by_notification":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>191f08a42f35c11039ffd49df699b665</design_topic_id>
        <name>_PRVW__e8be8d20c639c110fcad082a8f712941</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-02-17 14:33:45</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>24be8d202f39c11039ffd49df699b648</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_759755_needit_vi">7e5d0c242f35c11039ffd49df699b621</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">7e5d0c242f35c11039ffd49df699b621</sys_scope>
        <sys_update_name>sys_cb_design_topic_24be8d202f39c11039ffd49df699b648</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-02-17 14:33:45</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
